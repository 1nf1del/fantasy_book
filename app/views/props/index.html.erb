<div class="container padding-large-horizontal">

  <div class ="col-md-2">
    <% @sports.each do |sport| %>
      <%= link_to sport.name, {controller: "props", action: "index", sport_id: sport.id}, method: :get %>
      <br />
    <% end %>
  </div>

  <div class="col-md-8 prop-table">
    <table class="table table-responsive">
    <% @dates.each do |date| %>
      <tr> <td class="prop-date" colspan="3"> <%= date.strftime("%B %-d, %Y") %> </td></tr>
        <% @props.each do |prop| %>
          <% if prop.time.to_date === date %>
            <tr>
            <td class="prop-proposition" colspan="3"><%= prop.proposition %> </td>
            </tr>
            <tr>
            <td rowspan="<%= prop.prop_choices.count %>" class="vert-align"> <div class="prop-time"> <span class="time"><%= prop.time.strftime("%H:%M EST") %> </span></div></td>
            <% prop.prop_choices.each do |choice| %>
              <td class="prop-name"> <%= choice.name %> </td>
              <td> <%= button_tag(type: "button", class: "wager-btn", data: { propchoiceid: choice.id} ) do %>
                <%= content_tag(:strong, choice.display_line) %>
              <% end %> </td>
            </tr>
            <% end %>
          <% end %>
        <% end %>
    <% end %>
    </table>
  </div>

  <div class ="col-md-2 ticket">
    <h5> Betting Ticket </h5>
    <%= form_tag wagers_path, remote: true do %>
      <table>
        <tr>
          <td> <%= text_field_tag "wager[][prop_id]" %> </td>
          <td> <%= text_field_tag "wager[][risk_dollars]" %> </td>
          <td> <%= text_field_tag "wager[][prop_choice_id]" %> </td>
          <td> <%= text_field_tag "wager[][odds]" %> </td>
          <td> <%= text_field_tag "wager[][spread]" %> </td>
          <td> <%= text_field_tag "wager[][total]" %> </td>
        </tr>

        <tr class="actions">
          <td> <%= submit_tag "Submit" %> </td>
          <td> <%= button_tag "Add Wager", id: "add-wager" %> </td>
        </tr>

        <tr class="new-wager-row hidden">
          <td> <%= text_field_tag "wager[][prop_id]" %> </td>
          <td> <%= text_field_tag "wager[][risk_dollars]" %> </td>
          <td> <%= text_field_tag "wager[][prop_choice_id]" %> </td>
          <td> <%= text_field_tag "wager[][odds]" %> </td>
          <td> <%= text_field_tag "wager[][spread]" %> </td>
          <td> <%= text_field_tag "wager[][total]" %> </td>
        </tr>
      </table>
    <% end %>
  </div>
</div>

