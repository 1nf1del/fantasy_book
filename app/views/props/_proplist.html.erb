    <% @dates.each do |date| %>
        <% @props.each do |prop| %>
          <% if prop.time.to_date === date %>
            <div class="col-md-7 matchups">
            <div class="col-md-3 matchup-left choice"><div class="open-side">Matchup Side Open</div>
            <div class="available-cost available-odd">Available: <%= number_to_currency prop.prop_choices.first.available_dollars %> </div>
              <div class="contenders-info">
                <div class="contenders" data-propchoiceid="<%= prop.prop_choices.first.id %>"><%= prop.prop_choices.first.name %> <div class="odd-line"> <%= prop.prop_choices.first.display_spread %> </div> </div>
                <div class="enter-contest"><button name="button" type="button" class="enter-button first" data-propchoiceid="<%= prop.prop_choices.first.id %>">Enter Contest</button></div>
              </div>
              </div>
            <div class="col-md-1 matchup-info"><%= prop.time.strftime("%B %-d, %Y %n %l:%M %P EST") %>
              <div class="vs">Vs</div>
              <div class="prop-timer" data-time="<%= prop.time.to_i * 1000  %>"> </div>
            </div>
            <div class="col-md-3 matchup-right choice"><div class="closed-side">Matchup Side Closed</div>
            <div class="opponents-info">
            <div class="contenders" data-propchoiceid="<%= prop.prop_choices.last.id %>"> <%= prop.prop_choices.last.name %> <div class="odd-line"> <%= prop.prop_choices.last.display_spread %> </div> </div>
            <div class="enter-contest"><button name="button" type="button" class="enter-button last" data-propchoiceid="<%= prop.prop_choices.last.id %>" >Enter Contest</button></div>
            </div>
            </div>
            </div>
          <% end %>
        <% end %>
    <% end %>



<script type='text/javascript'>
  $(document).ready(function(){

    var odds = $('.matchups').find('.available-odd'), i;
    for (var i = 0; i < odds.length; i ++) {
      if ($(odds[i]).text() == " Available: $0.00 ") {
        $(odds[i]).removeClass('bold')
      }
    }


    var evens = $('.matchups').find('.available-even'), i;
    for (var i = 0; i < odds.length; i ++) {
      if ($(evens[i]).text() == " Available: $0.00 ") {
        $(evens[i]).removeClass('bold')
      }
    }

    setInterval(function () {
      var countdowns = $('.matchups').find('.prop-timer'), i;
      for (var i = 0; i < countdowns.length; i ++) {
        var target_date = $(countdowns[i]).data('time')
        var hours, minutes, seconds;
        var current_date = new Date().getTime();
        var seconds_left = (target_date - current_date) / 1000;
        hours = parseInt(seconds_left / 3600);
        seconds_left = seconds_left % 3600;
        minutes = parseInt(seconds_left / 60);
        seconds = parseInt(seconds_left % 60);
        if (hours.toString().length == 1) {
          hours = "0" + hours;
        }
        if (minutes.toString().length == 1) {
          minutes = "0" + minutes;
        }
        if (seconds.toString().length == 1) {
          seconds = "0" + seconds;
        }
        if (hours <= 0 && minutes <= 0 && seconds <= 0 ) {
          $(countdowns[i]).text("Event has started.");
        } else {
          $(countdowns[i]).text("Starts In " + hours + ":" + minutes + ":" + seconds);
        }
      }
    }, 1000);

    setInterval(function () {
      var wagers = $('.matchups').find('.wager-btn');
      $.each(wagers, function(index, value) {
        $.ajax({
          url: "/pc",
          type: "GET",
          data: {prop_choice_id: $(value).data('propchoiceid')},
          success: function (data) {
            updateAvailable(data, value);
          },
          error: function (xhr, status, error) {
            console.log(status + error);
          }
        });
      });
    }, 4000);

    function updateAvailable (responseData, value) {
          available = responseData.available_dollars;
          display_line = responseData.display_line;
          td = $(value).closest('td');
          container = $(td).closest('tbody');
          if ($(td)[0].classList.contains("odd")) {
            var odd = container.find('.available-odd')
            var oddChoice = container.find('.odd-choice')
            odd.html("Available: $" + available.toFixed(2))
            if (available == 0) {
              $(odd).removeClass("bold")
              container.find('.odd-line').text(display_line)
              $(oddChoice).prop('disabled', true);
            } else {
              $(odd).addClass("bold")
              container.find('.odd-line').text(display_line)
              $(oddChoice).prop('disabled', false);
            }
          } else {
            var even = container.find('.available-even')
            var evenChoice = container.find('.even-choice')
            even.html("Available: $" + available.toFixed(2))
            if (available == 0) {
              $(even).removeClass("bold")
              container.find('.even-line').text(display_line)
              $(evenChoice).prop('disabled', true);
            } else {
              $(even).addClass("bold")
              container.find('.even-line').text(display_line)
              $(evenChoice).prop('disabled', false);
            }
          }
    }
  })
</script>




